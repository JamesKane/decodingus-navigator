# Test Type Definitions
#
# This file defines all known DNA test types for sequencing and genotyping.
# Each test type specifies its capabilities and expected parameters.
#
# Categories: sequencing, genotyping
# Target Types: whole-genome, y-chromosome, mt-dna, autosomal, x-chromosome, mixed
#
# To add a custom test type, add a new entry following the pattern below.

test-types {

  # ============================================================================
  # SEQUENCING: Whole Genome - Short Read (Illumina, BGI, Element, Ultima)
  # ============================================================================

  WGS {
    display-name = "Whole Genome Sequencing"
    category = sequencing
    target-type = whole-genome
    expected-min-depth = 10.0
    expected-target-depth = 30.0
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["BAM", "CRAM", "VCF"]
  }

  WGS_LOW_PASS {
    display-name = "Low-Pass WGS"
    category = sequencing
    target-type = whole-genome
    expected-min-depth = 0.5
    expected-target-depth = 4.0
    supports {
      haplogroup-y = true   # Limited but possible
      haplogroup-mt = true
      autosomal-ibd = true  # Via imputation
      ancestry = true
    }
    typical-file-formats = ["BAM", "CRAM", "VCF"]
  }

  # ============================================================================
  # SEQUENCING: Whole Genome - Long Read (PacBio, Nanopore)
  # Long-read technologies excel at resolving complex/repetitive regions
  # including palindromic regions on the Y chromosome.
  # ============================================================================

  WGS_HIFI {
    display-name = "PacBio HiFi WGS"
    category = sequencing
    vendor = "PacBio"
    target-type = whole-genome
    expected-min-depth = 15.0
    expected-target-depth = 30.0
    supports {
      haplogroup-y = true   # Excellent - resolves complex Y regions
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["BAM", "CRAM", "VCF"]
  }

  WGS_NANOPORE {
    display-name = "Nanopore WGS"
    category = sequencing
    vendor = "Oxford Nanopore"
    target-type = whole-genome
    expected-min-depth = 15.0
    expected-target-depth = 30.0
    supports {
      haplogroup-y = true   # Good - ultra-long reads span complex regions
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["BAM", "CRAM", "VCF", "FASTQ"]
  }

  WGS_CLR {
    display-name = "PacBio CLR WGS"
    category = sequencing
    vendor = "PacBio"
    target-type = whole-genome
    expected-min-depth = 20.0
    expected-target-depth = 40.0   # Higher depth needed due to lower accuracy
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["BAM", "VCF"]
  }

  # ============================================================================
  # SEQUENCING: Exome
  # ============================================================================

  WES {
    display-name = "Whole Exome Sequencing"
    category = sequencing
    target-type = autosomal   # Primarily exonic regions
    expected-min-depth = 50.0
    expected-target-depth = 100.0
    supports {
      haplogroup-y = false   # No Y coverage
      haplogroup-mt = false  # No mtDNA coverage
      autosomal-ibd = false  # Sparse coverage
      ancestry = false
    }
    typical-file-formats = ["BAM", "CRAM", "VCF"]
  }

  # ============================================================================
  # SEQUENCING: Targeted Y-DNA
  # ============================================================================

  BIG_Y_500 {
    display-name = "FTDNA Big Y-500"
    category = sequencing
    vendor = "FamilyTreeDNA"
    target-type = y-chromosome
    expected-min-depth = 30.0
    expected-target-depth = 50.0
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["BAM", "VCF", "BED"]
  }

  BIG_Y_700 {
    display-name = "FTDNA Big Y-700"
    category = sequencing
    vendor = "FamilyTreeDNA"
    target-type = y-chromosome
    expected-min-depth = 30.0
    expected-target-depth = 50.0
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["BAM", "VCF", "BED"]
  }

  Y_ELITE {
    display-name = "Full Genomes Y Elite"
    category = sequencing
    vendor = "Full Genomes"
    target-type = y-chromosome
    expected-min-depth = 20.0
    expected-target-depth = 30.0
    supports {
      haplogroup-y = true
      haplogroup-mt = true   # Off-target mtDNA reads provide sufficient coverage
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["BAM", "CRAM", "VCF"]
  }

  # ============================================================================
  # SEQUENCING: Targeted mtDNA
  # ============================================================================

  MT_FULL_SEQUENCE {
    display-name = "mtDNA Full Sequence"
    category = sequencing
    target-type = mt-dna
    expected-min-depth = 500.0
    expected-target-depth = 1000.0
    supports {
      haplogroup-y = false
      haplogroup-mt = true
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["BAM", "FASTA", "VCF"]
  }

  MT_PLUS {
    display-name = "FTDNA mtDNA Plus"
    category = sequencing
    vendor = "FamilyTreeDNA"
    target-type = mt-dna
    expected-min-depth = 500.0
    expected-target-depth = 1000.0
    supports {
      haplogroup-y = false
      haplogroup-mt = true
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["FASTA", "VCF"]
  }

  MT_CR_ONLY {
    display-name = "mtDNA Control Region (HVR1/HVR2)"
    category = sequencing
    target-type = mt-dna
    expected-min-depth = 100.0
    expected-target-depth = 500.0
    supports {
      haplogroup-y = false
      haplogroup-mt = true   # Limited resolution
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["FASTA", "VCF"]
  }

  # ============================================================================
  # GENOTYPING: Y-DNA SNP Packs/Panels
  # These are probe-based or Sanger sequencing tests for specific Y-SNPs.
  # Results typically delivered as positive/negative calls for named SNPs.
  # ============================================================================

  YDNA_SNP_PACK_FTDNA {
    display-name = "FTDNA SNP Pack"
    category = genotyping   # Probe-based, not sequencing
    vendor = "FamilyTreeDNA"
    target-type = y-chromosome
    expected-marker-count = 100   # Varies by pack, typically 50-200 SNPs
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["CSV", "TXT"]
  }

  YDNA_PANEL_YSEQ {
    display-name = "YSEQ Panel"
    category = genotyping
    vendor = "YSEQ"
    target-type = y-chromosome
    # No expected-marker-count - continuous delivery, grows over time
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["CSV", "YSEQ"]   # Custom YSEQ format for incremental updates
  }

  YDNA_SNP_PANEL {
    display-name = "Y-DNA SNP Panel"
    category = genotyping
    target-type = y-chromosome
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false
      ancestry = false
    }
    typical-file-formats = ["CSV", "TXT", "VCF"]
  }

  # ============================================================================
  # GENOTYPING: Y-DNA Focused Arrays
  # ============================================================================

  ARRAY_BISDNA {
    display-name = "BISDNA Array"
    category = genotyping
    vendor = "BISDNA"
    target-type = y-chromosome   # Only Y-DNA delivered to customers
    expected-marker-count = 15000
    supports {
      haplogroup-y = true
      haplogroup-mt = false
      autosomal-ibd = false   # Autosomal not delivered
      ancestry = false
    }
    typical-file-formats = ["CSV", "TXT"]
  }

  # ============================================================================
  # GENOTYPING: Consumer Arrays (Autosomal + Mixed)
  # ============================================================================

  ARRAY_23ANDME_V5 {
    display-name = "23andMe v5 Chip"
    category = genotyping
    vendor = "23andMe"
    target-type = mixed
    expected-marker-count = 640000
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["TXT"]
  }

  ARRAY_23ANDME_V4 {
    display-name = "23andMe v4 Chip"
    category = genotyping
    vendor = "23andMe"
    target-type = mixed
    expected-marker-count = 570000
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["TXT"]
  }

  ARRAY_ANCESTRY_V2 {
    display-name = "AncestryDNA v2"
    category = genotyping
    vendor = "AncestryDNA"
    target-type = mixed
    expected-marker-count = 700000
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["TXT"]
  }

  ARRAY_FTDNA_FF {
    display-name = "FTDNA Family Finder"
    category = genotyping
    vendor = "FamilyTreeDNA"
    target-type = autosomal
    expected-marker-count = 700000
    supports {
      haplogroup-y = false
      haplogroup-mt = false
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["CSV"]
  }

  ARRAY_MYHERITAGE {
    display-name = "MyHeritage DNA"
    category = genotyping
    vendor = "MyHeritage"
    target-type = mixed
    expected-marker-count = 700000
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["CSV"]
  }

  ARRAY_LIVINGDNA {
    display-name = "LivingDNA"
    category = genotyping
    vendor = "LivingDNA"
    target-type = mixed
    expected-marker-count = 630000
    supports {
      haplogroup-y = true
      haplogroup-mt = true
      autosomal-ibd = true
      ancestry = true
    }
    typical-file-formats = ["CSV", "TXT"]
  }
}
