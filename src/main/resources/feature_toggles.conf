pds-submission {
  enabled = true
}

auth {
  enabled = false
}

at-protocol {
  enabled = false
}

developer-features {
  save-json-enabled = false
}

# Experimental features (not yet production-ready)
experimental {
  # STR calling from BAM/CRAM files using HipSTR reference
  # Calls Y-STRs with genomic coordinates for unmasking FTY markers
  str-caller-enabled = true
}

# Tree provider configuration
# Allows selection between FTDNA and DecodingUs tree providers per tree type
tree-providers {
  # Y-DNA tree provider: "ftdna" or "decodingus"
  ydna = "decodingus"

  # MT-DNA tree provider: "ftdna" or "decodingus"
  # Note: Decoding-Us MT tree is still in development
  mtdna = "ftdna"
}

# Ancestry analysis configuration
# Population percentage estimation using 1000 Genomes + HGDP/SGDP reference panels
ancestry-analysis {
  enabled = true

  # Default panel: "aims" for quick (~5k SNPs, 2-5 min), "genome-wide" for detailed (~500k SNPs, 20-30 min)
  default-panel = "aims"

  # Minimum SNPs with valid genotypes required for reliable analysis
  min-snps-aims = 3000
  min-snps-genome-wide = 100000

  # Minimum percentage to display in results (hides trace amounts)
  display-threshold = 0.5

  # Reference data version
  reference-version = "v1"
}

# Chip/Array genotype data support
# Support for raw data exports from 23andMe, AncestryDNA, FTDNA, MyHeritage, LivingDNA
chip-data {
  enabled = true

  # Minimum marker count to accept a chip file
  min-marker-count = 100000

  # Maximum acceptable no-call rate (0.05 = 5%)
  max-no-call-rate = 0.05

  # Minimum Y-DNA markers for haplogroup estimation
  min-y-markers = 50

  # Minimum mtDNA markers for haplogroup estimation
  min-mt-markers = 20

  # Supported vendors (auto-detected from file format)
  supported-vendors = ["23andMe", "AncestryDNA", "FamilyTreeDNA", "MyHeritage", "LivingDNA"]
}

# Reference genome haplogroup configuration
# These define the known Y-DNA haplogroup of each reference genome's source individual.
# Only positions on the path from root to this haplogroup need force-calling in pass 1;
# positions on other branches will naturally appear as variants in pass 2.
#
# Multiple name variants are listed for compatibility with different tree providers:
# - FTDNA uses "R-U152", "J-M267" format
# - Decoding-Us uses "R1b-U152", "J1a" format
reference-haplogroups {
  # GRCh38 Y chromosome is primarily from HuRef (J. Craig Venter's genome)
  # which is R1b-U152 downstream. Approximate terminal for optimization.
  "GRCh38" = "R1b-U152,R-U152"
  "hg38" = "R1b-U152,R-U152"

  # T2T-CHM13v2.0 Y chromosome comes from HG002 (Ashkenazi Jewish male)
  # which is J1a downstream. Approximate terminal for optimization.
  "T2T-CHM13" = "J1a,J-M267"
  "CHM13" = "J1a,J-M267"
  "chm13v2.0" = "J1a,J-M267"

  # GRCh37/hg19 - same source as GRCh38
  "GRCh37" = "R1b-U152,R-U152"
  "hg19" = "R1b-U152,R-U152"
}

# Centralized genome region metadata from API
# Provides curated centromeres, telomeres, cytobands, and Y-specific regions
# from a single authoritative source instead of multiple external downloads.
genome-regions-api {
  # Enable when API endpoint is deployed at decoding-us.com
  enabled = false

  # API endpoint base URL
  base-url = "https://decoding-us.com/api/v1"

  # Cache duration in days (region data rarely changes)
  cache-days = 7

  # Fallback to file downloads when API unavailable or disabled
  fallback-enabled = true
}